{
  "$schema": "https://codesandbox.io/schemas/tasks.json",
  "setupTasks": ["/workspace/.codesandbox/setup.sh"],
  "tasks": {
    "rebuild-nodejs": {
      "name": "Rebuild app on changes",
      "command": "cd /workspace/web && npm run build && npm run start",
      "restartOn": {
        "files": ["web/src/**/*"]
      },
      "runAtStart": true,
      "preview": {
        "port": 8080,
        "prLink": "devtool"
      }
    },
    "rebuild-mufl": {
      "name": "Rebuild mufl code on changes",
      "command": "cd /workspace/mufl_code/ && MUFL_STDLIB_PATH=/mufl/mufl_stdlib /mufl/bin/mufl-compile -mp /mufl/meta -mp /mufl/transactions ./actor.mu && cd /workspace/web && npm run copy-muflo",
      "restartOn": {
        "files": ["mufl_code/*.mu"]
      }
    },
    "start-broker": {
      "name": "Start Broker",
      "runAtStart": true,
      "command": "node /mufl/utilities/executables/dist/broker.js --host 0.0.0.0 --port 9001 --test_mode --logger_config --level DEBUG --print_callstack ERROR --logger_config_end",
    }
  }
}
